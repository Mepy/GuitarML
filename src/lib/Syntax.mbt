///|
using @parser {type Note, type Duration, type Chord, type Slur}

// ///| 
// pub struct Note {
//   string : UInt
//   fret : UInt
// } derive(Show)

// ///|
// pub enum Duration {
//   H1 // ğ…
//   H2 // ğ…
//   H4 // â™©
//   H8 // â™ª
//   H16 // ğ…¡
//   H32 // ğ…¢
//   D1 // ğ….
//   D2 // ğ….
//   D4 // â™©.
//   D8 // â™ª.
//   D16 // ğ…¡.
//   D32 // ğ…¢.
//   T1 // one of ğ…ğ…ğ…3
//   T2 // one of ğ…ğ…ğ…3
//   T4 // one of â™©â™©â™©3
//   T8 // one of â™ªâ™ªâ™ª3
//   T16 // one of ğ…¡ğ…¡ğ…¡3
//   T32 // one of ğ…¢ğ…¢ğ…¢3
// } derive(Show)

// ///|
// pub struct Chord {
//   duration : Duration
//   notes : Array[Note] // [] -> rest note ; [n] -> single note n ; [...] -> chord
//   // ensures notes are sorted under the descending order of strings
// } derive(Show)

// ///|
// pub enum Slur {
//   Normal // ä»€ä¹ˆä¹Ÿæ²¡æœ‰
//   Slide // æ»‘å¼¦
//   Hammer // å‡»å¼¦
//   Pull // å‹¾å¼¦
//   Bend1 // æ¨å¼¦åŠéŸ³
//   Bend2 // æ¨å¼¦å…¨éŸ³
//   Bend1R // æ¨å¼¦åŠéŸ³å¤ä½
//   Bend2R // æ¨å¼¦å…¨éŸ³å¤ä½
//   Vibrato // æ‰å¼¦
// } derive(Show)

///|
/// ä¸€è¡Œä¹å¥, chords.length = slurs.length + 1 = lyric.length
pub(all) struct Phrase {
  chords : Array[Chord]
  slurs : Array[Slur]
  lyric : String
} derive(Show)

///|
/// ä¹æ®µ
pub struct Section {
  name : String
  phrases : Array[Phrase]
} derive(Show)

///|
/// è°ƒæ€§ä¸»éŸ³
pub enum Key {
  C
  Db
  D
  Eb
  E
  F
  Gb
  G
  Ab
  A
  Bb
  B
} derive(Show)

///|
/// è°ƒå¼
pub enum Mode {
  Major
  Minor
  Ionian // = Major
  Dorian
  Phrygian
  Lydian
  Mixolydian
  Aeolian // Minor
  Locrian
} derive(Show)

///|
/// èŠ‚æ‹
pub(all) struct Sig {
  top : UInt
  bot : Duration
} derive(Show)

///|
pub struct Track {
  title : String
  author : String
  key : Key
  mode : Mode
  sig : Sig
  bpm : UInt
  sections : Array[Section]
} derive(Show)
